// eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('1s([\'1t\'],7(e,f,g){1a h={m:\'\'};h.1m=7(b){h.m=b.m;$(\'#l\').u(7(){2($(\'#l\').B(\'o\')){3}2(!$(\'#i\').H()){4.9.8(\'请输入11位手机号码\');3}2($(\'#k\').I()){4.9.8(\'请输入登录密码\');3}$(\'#l\').n(\'正在登录...\').B(\'o\',1);e.E(\'D/1b\',{i:$(\'#i\').6(),k:$(\'#k\').6()},7(a){4.9.8(a.w.x);2(a.s!=1){$(\'#l\').n(\'立即登录\').y(\'o\');3}R{$(\'#l\').n(\'正在跳转...\')}1e(7(){2(h.m){G.F=h.m;3}G.F=e.K(\'\')},1g)},C,z)})};h.j=7(){h.A--;2(h.A>0){$(\'#v\').n(h.A+\'秒后重发\').1j(\'p\').B(\'p\',\'p\');1e(7(){h.j()},1g)}R{$(\'#v\').n(\'获取验证码\').P(\'p\').y(\'p\')}};h.1p=7(d){h.m=d.m;h.O=d.O;h.t=d.t;h.q=d.q;2(h.t>0){h.A=h.t;h.j()}$(\'#v\').u(7(){2($(\'#v\').1c(\'p\')){3}2(!$(\'#i\').H()){4.9.8(\'请输入11位手机号码\');3}2(!$.M($(\'#L\').6())&&h.q==1){4.9.8(\'请输入图形验证码\');3}h.A=Z;e.E(\'D/j\',{i:$(\'#i\').6(),q:$.M($(\'#L\').6())||0,10:!h.O?"1u":"1k"},7(a){4.9.8(a.w.x);2(a.s!=1){$(\'#v\').n(\'获取验证码\').P(\'p\').y(\'p\')}2(a.s==-1&&h.q==1){$("#Q").1l(\'u\')}2(a.s==1){h.j()}},C,z)});$("#Q").u(7(){$(T).U(\'V\',\'../W/X.Y?c=1d&a=12&r=\'+13.14(15 16().17()));3 C});$(\'#l\').u(7(){2($(\'#l\').B(\'o\')){3}2(!$(\'#i\').H()){4.9.8(\'请输入11位手机号码\');3}2(!$(\'#j\').18()||$(\'#j\').19()!=5){4.9.8(\'请输入5位数字验证码\');3}2($(\'#k\').I()){4.9.8(\'请输入登录密码\');3}2($(\'#J\').I()){4.9.8(\'请重复输入密码\');3}2($(\'#k\').6()!==$(\'#J\').6()){4.9.8(\'两次密码输入不一致\');3}$(\'#l\').n(\'正在处理...\').B(\'o\',1);1a c=!h.O?"D/1n":"D/1o";e.E(c,{i:$(\'#i\').6(),j:$(\'#j\').6(),k:$(\'#k\').6()},7(a){2(a.s!=1){4.9.8(a.w.x);1a b=h.O?"立即找回":"立即注册";$(\'#l\').n(b).y(\'o\');3}R{4.S(a.w.x,\'\',7(){2(h.m){G.F=e.K(\'D/1b\',{i:$(\'#i\').6(),k:$(\'#k\').6(),m:h.m})}R{G.F=e.K(\'D/1b\',{i:$(\'#i\').6(),k:$(\'#k\').6(),})}})}},C,z)})};h.1q=7(c){h.t=c.t;h.m=c.m;h.q=c.q;2(h.t>0){h.A=h.t;h.j()}$(\'#v\').u(7(){2($(\'#v\').1c(\'p\')){3}2(!$(\'#i\').H()){4.9.8(\'请输入11位手机号码!\');3}2(!$.M($(\'#L\').6())&&h.q==1){4.9.8(\'请输入图形验证码\');3}h.A=Z;e.E(\'D/j\',{i:$(\'#i\').6(),10:\'1r\',q:$.M($(\'#L\').6())||0},7(a){2(a.s!=1){4.9.8(a.w.x);$(\'#v\').n(\'获取验证码\').P(\'p\').y(\'p\')}2(a.s==1){h.j()}},C,z)});$(\'#l\').u(7(){2($(\'#l\').B(\'o\')){3}2(!$(\'#i\').H()){4.9.8(\'请输入11位手机号码\');3}2(!$(\'#j\').18()||$(\'#j\').19()!=5){4.9.8(\'请输入5位数字验证码\');3}2($(\'#k\').I()){4.9.8(\'请输入登录密码\');3}2($(\'#J\').I()){4.9.8(\'请重复输入密码\');3}2($(\'#k\').6()!==$(\'#J\').6()){4.9.8(\'两次密码输入不一致\');3}$(\'#l\').n(\'正在绑定...\').B(\'o\',1);e.E(\'N/1h\',{i:$(\'#i\').6(),j:$(\'#j\').6(),k:$(\'#k\').6()},7(b){2(b.s==0){4.9.8(b.w.x);$(\'#l\').n(\'立即绑定\').y(\'o\');3}2(b.s<0){4.1i(b.w.x,"注意",7(){e.E(\'N/1h\',{i:$(\'#i\').6(),j:$(\'#j\').6(),k:$(\'#k\').6(),1i:1},7(a){2(a.s==1){4.S(\'绑定成功!\',\'\',7(){G.F=c.m?1f(c.m):e.K(\'N\')});3}4.9.8(a.w.x);$(\'#l\').n(\'立即绑定\').y(\'o\');3},z,z)},7(){$(\'#l\').n(\'立即绑定\').y(\'o\')});3}4.S(\'绑定成功!\',\'\',7(){G.F=c.m?1f(c.m):e.K(\'N\')})},z,z)});$("#Q").u(7(){$(T).U(\'V\',\'../W/X.Y?c=1d&a=12&r=\'+13.14(15 16().17()));3 C})};h.1v=7(b){h.t=b.t;h.q=b.q;2(h.t>0){h.A=h.t;h.j()}$(\'#v\').u(7(){2($(\'#v\').1c(\'p\')){3}2(!$(\'#i\').H()){4.9.8(\'请输入11位手机号码\');3}2(!$.M($(\'#L\').6())&&h.q==1){4.9.8(\'请输入图形验证码\');3}h.A=Z;e.E(\'D/j\',{i:$(\'#i\').6(),10:\'1w\',q:$.M($(\'#L\').6())||0},7(a){2(a.s!=1){4.9.8(a.w.x);$(\'#v\').n(\'获取验证码\').P(\'p\').y(\'p\')}2(a.s==1){h.j()}},C,z)});$(\'#l\').u(7(){2($(\'#l\').B(\'o\')){3}2(!$(\'#i\').H()){4.9.8(\'请输入11位手机号码\');3}2(!$(\'#j\').18()||$(\'#j\').19()!=5){4.9.8(\'请输入5位数字验证码\');3}2($(\'#k\').I()){4.9.8(\'请输入登录密码\');3}2($(\'#J\').I()){4.9.8(\'请重复输入密码\');3}2($(\'#k\').6()!==$(\'#J\').6()){4.9.8(\'两次密码输入不一致\');3}$(\'#l\').n(\'正在修改...\').B(\'o\',1);e.E(\'N/1x\',{i:$(\'#i\').6(),j:$(\'#j\').6(),k:$(\'#k\').6()},7(a){2(a.s!=1){4.9.8(a.w.x);$(\'#l\').n(\'立即修改\').y(\'o\');3}4.S(\'修改成功\',\'\',7(){G.F=e.K(\'N\')})},C,z)});$("#Q").u(7(){$(T).U(\'V\',\'../W/X.Y?c=1d&a=12&r=\'+13.14(15 16().17()));3 C})};3 h});',62,96,'||if|return|FoxUI||val|function|show|toast|||||||||mobile|verifycode|pwd|btnSubmit|backurl|html|stop|disabled|imgcode||status|endtime|click|btnCode|result|message|removeAttr|true|seconds|attr|false|account|json|href|location|isMobile|isEmpty|pwd1|getUrl|verifycode2|trim|member|type|removeClass|btnCode2|else|alert|this|prop|src|web|index|php|60|temp||code|Math|round|new|Date|getTime|isInt|len|var|login|hasClass|utility|setTimeout|atob|1000|bind|confirm|addClass|sms_forget|trigger|initLogin|register|forget|initRf|initBind|sms_bind|define|core|sms_reg|initChange|sms_changepwd|changepwd'.split('|'),0,{}))

define(['core'], function(e, f, g) {
    var h = {
        backurl: ''
    };
    h.initLogin = function(b) {
        h.backurl = b.backurl;
        $('#btnSubmit').click(function() {
            if ($('#btnSubmit').attr('stop')) {
                return
            }
            if (!$('#mobile').isMobile()) {
                FoxUI.toast.show('请输入11位手机号码');
                return
            }
            if ($('#pwd').isEmpty()) {
                FoxUI.toast.show('请输入登录密码');
                return
            }
            $('#btnSubmit').html('正在登录...').attr('stop', 1);
            e.json('account/login', {
                mobile: $('#mobile').val(),
                pwd: $('#pwd').val()
            }, function(a) {
                FoxUI.toast.show(a.result.message);
                if (a.status != 1) {
                    $('#btnSubmit').html('立即登录').removeAttr('stop');
                    return
                } else {
                    $('#btnSubmit').html('正在跳转...')
                }
                setTimeout(function() {
                    if (h.backurl) {
                        location.href = h.backurl;
                        return
                    }
                    location.href = e.getUrl('')
                }, 1000)
            }, false, true)
        })
    };
    h.verifycode = function() {
        h.seconds--;
        if (h.seconds > 0) {
            $('#btnCode').html(h.seconds + '秒后重发').addClass('disabled').attr('disabled', 'disabled');
            setTimeout(function() {
                h.verifycode()
            }, 1000)
        } else {
            $('#btnCode').html('获取验证码').removeClass('disabled').removeAttr('disabled')
        }
    };
    h.initRf = function(d) {
        h.backurl = d.backurl;
        h.type = d.type;
        h.endtime = d.endtime;
        h.imgcode = d.imgcode;
        if (h.endtime > 0) {
            h.seconds = h.endtime;
            h.verifycode()
        }
        $('#btnCode').click(function() {
            if ($('#btnCode').hasClass('disabled')) {
                return
            }
            if (!$('#mobile').isMobile()) {
                FoxUI.toast.show('请输入11位手机号码');
                return
            }
            if (!$.trim($('#verifycode2').val()) && h.imgcode == 1) {
                FoxUI.toast.show('请输入图形验证码');
                return
            }
            h.seconds = 60;
            e.json('account/verifycode', {
                mobile: $('#mobile').val(),
                imgcode: $.trim($('#verifycode2').val()) || 0,
                temp: !h.type ? "sms_reg" : "sms_forget"
            }, function(a) {
                FoxUI.toast.show(a.result.message);
                if (a.status != 1) {
                    $('#btnCode').html('获取验证码').removeClass('disabled').removeAttr('disabled')
                }
                if (a.status == -1 && h.imgcode == 1) {
                    $("#btnCode2").trigger('click')
                }
                if (a.status == 1) {
                    h.verifycode()
                }
            }, false, true)
        });
        $("#btnCode2").click(function() {
            $(this).prop('src', '../web/index.php?c=utility&a=code&r=' + Math.round(new Date().getTime()));
            return false
        });
        $('#btnSubmit').click(function() {
            if ($('#btnSubmit').attr('stop')) {
                return
            }
            if (!$('#mobile').isMobile()) {
                FoxUI.toast.show('请输入11位手机号码');
                return
            }
            if (!$('#verifycode').isInt() || $('#verifycode').len() != 5) {
                FoxUI.toast.show('请输入5位数字验证码');
                return
            }
            if ($('#pwd').isEmpty()) {
                FoxUI.toast.show('请输入登录密码');
                return
            }
            if ($('#pwd1').isEmpty()) {
                FoxUI.toast.show('请重复输入密码');
                return
            }
            if ($('#pwd').val() !== $('#pwd1').val()) {
                FoxUI.toast.show('两次密码输入不一致');
                return
            }
            $('#btnSubmit').html('正在处理...').attr('stop', 1);
            var c = !h.type ? "account/register" : "account/forget";
            e.json(c, {
                mobile: $('#mobile').val(),
                verifycode: $('#verifycode').val(),
                pwd: $('#pwd').val()
            }, function(a) {
                if (a.status != 1) {
                    FoxUI.toast.show(a.result.message);
                    var b = h.type ? "立即找回" : "立即注册";
                    $('#btnSubmit').html(b).removeAttr('stop');
                    return
                } else {
                    FoxUI.alert(a.result.message, '', function() {
                        if (h.backurl) {
                            location.href = e.getUrl('account/login', {
                                mobile: $('#mobile').val(),
                                pwd: $('#pwd').val(),
                                backurl: h.backurl
                            })
                        } else {
                            location.href = e.getUrl('account/login', {
                                mobile: $('#mobile').val(),
                                pwd: $('#pwd').val(),
                            })
                        }
                    })
                }
            }, false, true)
        })
    };
    h.initBind = function(c) {
        h.endtime = c.endtime;
        h.backurl = c.backurl;
        h.imgcode = c.imgcode;
        if (h.endtime > 0) {
            h.seconds = h.endtime;
            h.verifycode()
        }
        $('#btnCode').click(function() {
            if ($('#btnCode').hasClass('disabled')) {
                return
            }
            if (!$('#mobile').isMobile()) {
                FoxUI.toast.show('请输入11位手机号码!');
                return
            }
            if (!$.trim($('#verifycode2').val()) && h.imgcode == 1) {
                FoxUI.toast.show('请输入图形验证码');
                return
            }
            h.seconds = 60;
            e.json('account/verifycode', {
                mobile: $('#mobile').val(),
                temp: 'sms_bind',
                imgcode: $.trim($('#verifycode2').val()) || 0
            }, function(a) {
                if (a.status != 1) {
                    FoxUI.toast.show(a.result.message);
                    $('#btnCode').html('获取验证码').removeClass('disabled').removeAttr('disabled')
                }
                if (a.status == 1) {
                    h.verifycode()
                }
            }, false, true)
        });
        $('#btnSubmit').click(function() {
            if ($('#btnSubmit').attr('stop')) {
                return
            }
            if (!$('#mobile').isMobile()) {
                FoxUI.toast.show('请输入11位手机号码');
                return
            }
            if (!$('#verifycode').isInt() || $('#verifycode').len() != 5) {
                FoxUI.toast.show('请输入5位数字验证码');
                return
            }
            if ($('#pwd').isEmpty()) {
                FoxUI.toast.show('请输入登录密码');
                return
            }
            if ($('#pwd1').isEmpty()) {
                FoxUI.toast.show('请重复输入密码');
                return
            }
            if ($('#pwd').val() !== $('#pwd1').val()) {
                FoxUI.toast.show('两次密码输入不一致');
                return
            }
            $('#btnSubmit').html('正在绑定...').attr('stop', 1);
            e.json('member/bind', {
                mobile: $('#mobile').val(),
                verifycode: $('#verifycode').val(),
                pwd: $('#pwd').val()
            }, function(b) {
                
                if (b.status == 0) {
                    FoxUI.toast.show(b.result.message);
                    $('#btnSubmit').html('立即绑定').removeAttr('stop');
                    return
                }
                if (b.status < 0) {
                    FoxUI.confirm(b.result.message, "注意", function() {
                        e.json('member/bind', {
                            mobile: $('#mobile').val(),
                            verifycode: $('#verifycode').val(),
                            pwd: $('#pwd').val(),
                            confirm: 1
                        }, function(a) {
                            if (a.status == 1) {
                                FoxUI.alert('绑定成功!', '', function() {
                                    location.href = e.getUrl('member/info')
                                });
                                return
                            }
                            FoxUI.toast.show(a.result.message);
                            $('#btnSubmit').html('立即绑定').removeAttr('stop');
                            return
                        }, true, true)
                    }, function() {
                        $('#btnSubmit').html('立即绑定').removeAttr('stop')
                    });
                    return
                }
                FoxUI.alert('绑定成功!', '', function() {
                    location.href = e.getUrl('member/info')
                })
            }, true, true)
        });
        $("#btnCode2").click(function() {
            $(this).prop('src', '../web/index.php?c=utility&a=code&r=' + Math.round(new Date().getTime()));
            return false
        })
    };
    h.initChange = function(b) {
        h.endtime = b.endtime;
        h.imgcode = b.imgcode;
        if (h.endtime > 0) {
            h.seconds = h.endtime;
            h.verifycode()
        }
        $('#btnCode').click(function() {
            if ($('#btnCode').hasClass('disabled')) {
                return
            }
            if (!$('#mobile').isMobile()) {
                FoxUI.toast.show('请输入11位手机号码');
                return
            }
            if (!$.trim($('#verifycode2').val()) && h.imgcode == 1) {
                FoxUI.toast.show('请输入图形验证码');
                return
            }
            h.seconds = 60;
            e.json('account/verifycode', {
                mobile: $('#mobile').val(),
                temp: 'sms_changepwd',
                imgcode: $.trim($('#verifycode2').val()) || 0
            }, function(a) {
                if (a.status != 1) {
                    FoxUI.toast.show(a.result.message);
                    $('#btnCode').html('获取验证码').removeClass('disabled').removeAttr('disabled')
                }
                if (a.status == 1) {
                    h.verifycode()
                }
            }, false, true)
        });
        $('#btnSubmit').click(function() {
            if ($('#btnSubmit').attr('stop')) {
                return
            }
            if (!$('#mobile').isMobile()) {
                FoxUI.toast.show('请输入11位手机号码');
                return
            }
            if (!$('#verifycode').isInt() || $('#verifycode').len() != 5) {
                FoxUI.toast.show('请输入5位数字验证码');
                return
            }
            if ($('#pwd').isEmpty()) {
                FoxUI.toast.show('请输入登录密码');
                return
            }
            if ($('#pwd1').isEmpty()) {
                FoxUI.toast.show('请重复输入密码');
                return
            }
            if ($('#pwd').val() !== $('#pwd1').val()) {
                FoxUI.toast.show('两次密码输入不一致');
                return
            }
            $('#btnSubmit').html('正在修改...').attr('stop', 1);
            e.json('member/changepwd', {
                mobile: $('#mobile').val(),
                verifycode: $('#verifycode').val(),
                pwd: $('#pwd').val()
            }, function(a) {
                if (a.status != 1) {
                    FoxUI.toast.show(a.result.message);
                    $('#btnSubmit').html('立即修改').removeAttr('stop');
                    return
                }
                FoxUI.alert('修改成功', '', function() {
                    location.href = e.getUrl('member')
                })
            }, false, true)
        });
        $("#btnCode2").click(function() {
            $(this).prop('src', '../web/index.php?c=utility&a=code&r=' + Math.round(new Date().getTime()));
            return false
        })
    };
    return h
});